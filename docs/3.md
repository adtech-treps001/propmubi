cat > "$UX_DIR/screens/cp/01-cp-dashboard.md" << 'CP_DASHBOARD'
CHANNEL PARTNER DASHBOARD
Overview
Main dashboard for CPs (like Priya) to manage leads, site visits, commissions, and performance.
Persona Context
Priya Sharma (CP)

Age: 29, Independent consultant
Goal: Close 30+ deals annually
Needs: Quality leads, tools to track, fair commissions

Main Interface
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â˜° Propmubi CP Portal        ðŸ””(3)  ðŸ‘¤ Priya         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                     â”‚
â”‚ Welcome back, Priya! ðŸ‘‹                             â”‚
â”‚                                                     â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚ PERFORMANCE THIS MONTH                      â”‚   â”‚
â”‚ â”‚                                             â”‚   â”‚
â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚   â”‚
â”‚ â”‚ â”‚  Leads   â”‚  Visits  â”‚ Closures â”‚ Earned â”‚â”‚   â”‚
â”‚ â”‚ â”‚          â”‚          â”‚          â”‚        â”‚â”‚   â”‚
â”‚ â”‚ â”‚    24    â”‚    18    â”‚     3    â”‚ â‚¹4.5L  â”‚â”‚   â”‚
â”‚ â”‚ â”‚  +15%    â”‚   +12%   â”‚   +50%   â”‚  +45%  â”‚â”‚   â”‚
â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                     â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚ TODAY'S SCHEDULE                 [View All] â”‚   â”‚
â”‚ â”‚                                             â”‚   â”‚
â”‚ â”‚ 10:00 AM - Site Visit                       â”‚   â”‚
â”‚ â”‚ ðŸ“ Prestige Lakeside, Gachibowli           â”‚   â”‚
â”‚ â”‚ ðŸ‘¤ Rajesh Kumar (+91 98765-43210)          â”‚   â”‚
â”‚ â”‚ [View Details] [Start Navigation]           â”‚   â”‚
â”‚ â”‚                                             â”‚   â”‚
â”‚ â”‚ 2:30 PM - Client Call                       â”‚   â”‚
â”‚ â”‚ ðŸ‘¤ Sunita Reddy (Investor)                  â”‚   â”‚
â”‚ â”‚ Topic: Portfolio review                     â”‚   â”‚
â”‚ â”‚ [View Client Profile] [Join Call]           â”‚   â”‚
â”‚ â”‚                                             â”‚   â”‚
â”‚ â”‚ 5:00 PM - Property Inspection               â”‚   â”‚
â”‚ â”‚ ðŸ“ My Home Bhooja, Unit 1507                â”‚   â”‚
â”‚ â”‚ Status: Pre-possession check                â”‚   â”‚
â”‚ â”‚ [View Checklist]                            â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                     â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚ NEW LEADS (6)                    [View All] â”‚   â”‚
â”‚ â”‚                                             â”‚   â”‚
â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚   â”‚
â”‚ â”‚ â”‚ ðŸ”¥ HOT LEAD                             â”‚ â”‚   â”‚
â”‚ â”‚ â”‚ Amit Patel                              â”‚ â”‚   â”‚
â”‚ â”‚ â”‚ Budget: â‚¹85L-â‚¹95L | 3 BHK | Gachibowliâ”‚ â”‚   â”‚
â”‚ â”‚ â”‚ Intent: Very High (unlocked property)   â”‚ â”‚   â”‚
â”‚ â”‚ â”‚ Property: Prestige Lakeside Habitat     â”‚ â”‚   â”‚
â”‚ â”‚ â”‚ Last activity: 2 hours ago              â”‚ â”‚   â”‚
â”‚ â”‚ â”‚                                         â”‚ â”‚   â”‚
â”‚ â”‚ â”‚ [Accept Lead] [Call Now] [WhatsApp]    â”‚ â”‚   â”‚
â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚   â”‚
â”‚ â”‚                                             â”‚   â”‚
â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚   â”‚
â”‚ â”‚ â”‚ âš¡ WARM LEAD                            â”‚ â”‚   â”‚
â”‚ â”‚ â”‚ Meera Shah                              â”‚ â”‚   â”‚
â”‚ â”‚ â”‚ Budget: â‚¹70L-â‚¹80L | 2 BHK | Kondapur  â”‚ â”‚   â”‚
â”‚ â”‚ â”‚ Intent: Medium (viewed 3 properties)    â”‚ â”‚   â”‚
â”‚ â”‚ â”‚ Timeline: 3-6 months                    â”‚ â”‚   â”‚
â”‚ â”‚ â”‚                                         â”‚ â”‚   â”‚
â”‚ â”‚ â”‚ [Accept Lead] [View Details]            â”‚ â”‚   â”‚
â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                     â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚ PENDING ACTIONS (4)                         â”‚   â”‚
â”‚ â”‚                                             â”‚   â”‚
â”‚ â”‚ âš ï¸  Submit feedback: Rajesh Kumar site visitâ”‚   â”‚
â”‚ â”‚    Due: Today, 6:00 PM                      â”‚   â”‚
â”‚ â”‚    [Submit Feedback â†’]                      â”‚   â”‚
â”‚ â”‚                                             â”‚   â”‚
â”‚ â”‚ âš ï¸  Upload documents: Unit 1201 transaction â”‚   â”‚
â”‚ â”‚    Due: Tomorrow                            â”‚   â”‚
â”‚ â”‚    [Upload Documents â†’]                     â”‚   â”‚
â”‚ â”‚                                             â”‚   â”‚
â”‚ â”‚ ðŸ“‹ Follow-up: Sunita Reddy (3 days overdue)â”‚   â”‚
â”‚ â”‚    [Call Now] [Schedule Call]               â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                     â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚ COMMISSION TRACKER               [Details] â”‚   â”‚
â”‚ â”‚                                             â”‚   â”‚
â”‚ â”‚ This Month: â‚¹4.5L                           â”‚   â”‚
â”‚ â”‚ Pending: â‚¹2.2L (2 deals in progress)        â”‚   â”‚
â”‚ â”‚ Next Payout: Dec 5 (â‚¹3.8L)                 â”‚   â”‚
â”‚ â”‚                                             â”‚   â”‚
â”‚ â”‚ [â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘] 67% of target           â”‚   â”‚
â”‚ â”‚ Target: â‚¹6.5L/month                         â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

layout:
  type: "responsive-grid"
  columns: 12
  gap: 24px
  
  sections:
    header:
      columns: 12
      height: "72px"
      sticky: true
    
    performance_cards:
      mobile: 12
      tablet: 12
      desktop: 12
      height: "auto"
    
    schedule:
      mobile: 12
      tablet: 6
      desktop: 6
      order: 1
    
    new_leads:
      mobile: 12
      tablet: 6
      desktop: 6
      order: 2
    
    pending_actions:
      mobile: 12
      tablet: 12
      desktop: 4
      order: 3
    
    commission:
      mobile: 12
      tablet: 12
      desktop: 8
      order: 4


interface PerformanceCard {
  label: string
  value: number
  change: number  // percentage
  trend: 'up' | 'down' | 'neutral'
  icon: React.ReactNode
  color: string
}

const performanceCards: PerformanceCard[] = [
  {
    label: "Leads",
    value: 24,
    change: 15,
    trend: "up",
    icon: <UsersIcon />,
    color: "#2A9D8F"
  },
  // ... more cards
]
```

**Visual Design:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ðŸ‘¥ Leads             â”‚
â”‚                      â”‚
â”‚       24             â”‚ â† Large, bold
â”‚                      â”‚
â”‚ â†— +15% from last mon.â”‚ â† Green if up
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Colors:
- Border: None
- Background: White
- Shadow: 0 2px 8px rgba(0,0,0,0.06)
- Hover: Lift (translate -2px)
- Change positive: #2A9D8F
- Change negative: #E53E3E
interface LeadCard {
  id: string
  name: string
  priority: 'hot' | 'warm' | 'cold'
  budget: {
    min: number
    max: number
  }
  requirements: {
    configuration: string
    location: string
  }
  intent: 'very_high' | 'high' | 'medium' | 'low'
  property?: Property
  lastActivity: Date
  timeline: string
}
```

**Priority Badges:**
```
ðŸ”¥ HOT LEAD
- Background: Linear gradient (#E76F51 â†’ #F4A261)
- Text: White
- Border: None
- Animation: Pulse

âš¡ WARM LEAD
- Background: #FFF7ED
- Text: #F4A261
- Border: 1px solid #F4A261

â„ï¸ COLD LEAD
- Background: #F3F4F6
- Text: #6B7280
- Border: 1px solid #E5E7EB

button.accept-lead {
  background: linear-gradient(135deg, #0A4D3C, #2A9D8F);
  color: white;
  padding: 12px 24px;
  border-radius: 8px;
  font-weight: 600;
  box-shadow: 0 2px 8px rgba(42, 157, 143, 0.3);
  transition: all 0.2s ease;
}

button.accept-lead:hover {
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(42, 157, 143, 0.4);
}
button.call-now {
  background: white;
  color: #0A4D3C;
  border: 1px solid #E5E7EB;
  padding: 10px 20px;
  border-radius: 8px;
  
  &:hover {
    border-color: #0A4D3C;
    background: #F0FDF4;
  }
}

interface CPDashboardState {
  performance: {
    leads: number
    visits: number
    closures: number
    earnings: number
    changes: {
      leads: number
      visits: number
      closures: number
      earnings: number
    }
  }
  
  schedule: ScheduleItem[]
  newLeads: Lead[]
  pendingActions: Action[]
  
  commission: {
    thisMonth: number
    pending: number
    nextPayout: {
      date: Date
      amount: number
    }
    target: number
  }
  
  isLoading: boolean
  error: string | null
}

const useCPDashboard = () => {
  const [state, setState] = useState<CPDashboardState>(initialState)
  
  useEffect(() => {
    const fetchDashboardData = async () => {
      try {
        const [performance, schedule, leads, actions, commission] = 
          await Promise.all([
            api.cp.getPerformance(),
            api.cp.getSchedule(),
            api.cp.getNewLeads(),
            api.cp.getPendingActions(),
            api.cp.getCommissionData()
          ])
        
        setState({
          performance,
          schedule,
          newLeads: leads,
          pendingActions: actions,
          commission,
          isLoading: false,
          error: null
        })
      } catch (error) {
        setState(prev => ({
          ...prev,
          isLoading: false,
          error: error.message
        }))
      }
    }
    
    fetchDashboardData()
    
    // Real-time updates via WebSocket
    const ws = connectToCPChannel(cpId)
    ws.on('new_lead', (lead) => {
      setState(prev => ({
        ...prev,
        newLeads: [lead, ...prev.newLeads]
      }))
      
      // Show toast notification
      toast.success('New lead assigned!', {
        action: {
          label: 'View',
          onClick: () => navigate(`/leads/${lead.id}`)
        }
      })
    })
    
    return () => ws.disconnect()
  }, [cpId])
  
  return state
}
```

## Interactions & Behaviors

### Lead Acceptance Flow
```
User clicks "Accept Lead"
  â†“
Optimistic UI update (immediate feedback)
  â†“
API call: POST /api/cp/leads/:leadId/accept
  â†“
Success:
  - Lead moves to "My Leads"
  - Show success toast
  - Auto-open lead detail
  - Send WhatsApp to customer (auto)
  
Failure:
  - Revert UI
  - Show error toast
  - Reason: Already accepted, no longer available

websocket_events:
  - event: "new_lead_assigned"
    action: "Prepend to new leads list"
    notification: "Toast + Badge update"
  
  - event: "lead_status_changed"
    action: "Update lead card status"
    notification: "Silent update"
  
  - event: "schedule_updated"
    action: "Refresh schedule section"
    notification: "Toast if conflict"
  
  - event: "commission_paid"
    action: "Update commission tracker"
    notification: "Celebration animation + Toast"
```

### Quick Actions

**Call Now:**
- Mobile: Triggers native phone dialer
- Desktop: Shows call options (Skype, WhatsApp Call, etc.)
- Logs call attempt in CRM

**WhatsApp:**
- Opens WhatsApp with pre-filled message:
```
  Hi [Name], this is Priya from Propmubi. 
  I see you're interested in [Property]. 
  I'd be happy to help! When would be a 
  good time to discuss?
```

**Start Navigation:**
- Opens Google Maps with destination
- Estimated time shown
- Traffic conditions displayed

## Responsive Design

### Mobile (< 768px)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â˜°  Priya        ðŸ””(3)  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Swipeable Cards:        â”‚
â”‚                         â”‚
â”‚ [Performance Summary]   â”‚
â”‚ â† Swipe â†’              â”‚
â”‚                         â”‚
â”‚ [Today's Schedule]      â”‚
â”‚ â† Swipe â†’              â”‚
â”‚                         â”‚
â”‚ [New Leads]             â”‚
â”‚ â† Swipe â†’              â”‚
â”‚                         â”‚
â”‚ Bottom Navigation:      â”‚
â”‚ [Home] [Leads] [Cal]    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Tablet (768px - 1024px)
```
Two-column layout:
- Left: Performance + Schedule
- Right: Leads + Actions
```

### Desktop (> 1024px)
```
Multi-column dashboard grid as shown in main interface

track_events:
  - cp_dashboard_viewed
  - performance_card_clicked
  - lead_accepted
  - lead_rejected
  - schedule_item_clicked
  - call_initiated
  - whatsapp_opened
  - commission_details_viewed
  - time_spent_on_dashboard
optimization:
  initial_load:
    - Server-side render performance cards
    - Lazy load lead images
    - Skeleton screens for async data
  
  updates:
    - Debounce real-time updates (max 1/sec)
    - Virtual scrolling for long lead lists
    - Memoize performance calculations
  
  caching:
    - Cache dashboard data (5 min TTL)
    - Prefetch likely next actions
    - Background sync when idle

const ErrorStates = {
  NO_LEADS: {
    icon: <EmptyInboxIcon />,
    title: "No new leads yet",
    message: "We'll notify you when new leads are assigned",
    action: null
  },
  
  NETWORK_ERROR: {
    icon: <WifiOffIcon />,
    title: "Connection lost",
    message: "Check your internet connection",
    action: {
      label: "Retry",
      onClick: () => refetch()
    }
  },
  
  PERMISSION_DENIED: {
    icon: <LockIcon />,
    title: "Access restricted",
    message: "Contact admin to enable CP access",
    action: {
      label: "Contact Support",
      onClick: () => openChat()
    }
  }
}
```

## Testing Checklist

- [ ] Performance cards display correctly
- [ ] Schedule updates in real-time
- [ ] Lead acceptance flow works
- [ ] WhatsApp/Call actions work
- [ ] Commission tracker accurate
- [ ] Responsive on all devices
- [ ] WebSocket reconnects on disconnect
- [ ] Error states display properly
- [ ] Analytics events fire
- [ ] Accessibility compliant

CP_DASHBOARD

cat > "$UX_DIR/screens/cp/02-lead-management.md" << 'CP_LEADS'
# CHANNEL PARTNER - LEAD MANAGEMENT

## Overview
Comprehensive lead management interface with pipeline view, activity tracking, and conversion tools.

## Main Interface - Pipeline View
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â† Back to Dashboard    Lead Management         [Filter] [Sort]  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚  New    â”‚ Contact â”‚ Visit   â”‚ Negotia â”‚ Agree   â”‚ Closed  â”‚ â”‚
â”‚ â”‚   (6)   â”‚  (12)   â”‚ Schedu  â”‚  ting   â”‚  ment   â”‚  (3)    â”‚ â”‚
â”‚ â”‚         â”‚         â”‚  (8)    â”‚  (5)    â”‚  (2)    â”‚         â”‚ â”‚
â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚ â”‚         â”‚         â”‚         â”‚         â”‚         â”‚         â”‚ â”‚
â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â” â”‚ â”Œâ”€â”€â”€â”€â”€â” â”‚ â”Œâ”€â”€â”€â”€â”€â” â”‚ â”Œâ”€â”€â”€â”€â”€â” â”‚ â”Œâ”€â”€â”€â”€â”€â” â”‚ â”Œâ”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚ â”‚ â”‚ðŸ”¥Hotâ”‚ â”‚ â”‚Amit â”‚ â”‚ â”‚Site â”‚ â”‚ â”‚Priceâ”‚ â”‚ â”‚Tokenâ”‚ â”‚ â”‚Doneâ”‚ â”‚ â”‚
â”‚ â”‚ â”‚Lead â”‚ â”‚ â”‚Patelâ”‚ â”‚ â”‚Visitâ”‚ â”‚ â”‚Talk â”‚ â”‚ â”‚Paid â”‚ â”‚ â”‚â‚¹4.5â”‚ â”‚ â”‚
â”‚ â”‚ â”‚     â”‚ â”‚ â”‚     â”‚ â”‚ â”‚     â”‚ â”‚ â”‚     â”‚ â”‚ â”‚     â”‚ â”‚ â”‚Lakhâ”‚ â”‚ â”‚
â”‚ â”‚ â””â”€â”€â”€â”€â”€â”˜ â”‚ â””â”€â”€â”€â”€â”€â”˜ â”‚ â””â”€â”€â”€â”€â”€â”˜ â”‚ â””â”€â”€â”€â”€â”€â”˜ â”‚ â””â”€â”€â”€â”€â”€â”˜ â”‚ â””â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚ â”‚         â”‚         â”‚         â”‚         â”‚         â”‚         â”‚ â”‚
â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â” â”‚ â”Œâ”€â”€â”€â”€â”€â” â”‚ â”Œâ”€â”€â”€â”€â”€â” â”‚ â”Œâ”€â”€â”€â”€â”€â” â”‚ â”Œâ”€â”€â”€â”€â”€â” â”‚ â”Œâ”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚ â”‚ â”‚Warm â”‚ â”‚ â”‚Meeraâ”‚ â”‚ â”‚Pre  â”‚ â”‚ â”‚Deal â”‚ â”‚ â”‚Legalâ”‚ â”‚ â”‚Doneâ”‚ â”‚ â”‚
â”‚ â”‚ â”‚Lead â”‚ â”‚ â”‚Shah â”‚ â”‚ â”‚Visitâ”‚ â”‚ â”‚Termsâ”‚ â”‚ â”‚Checkâ”‚ â”‚ â”‚â‚¹3.2â”‚ â”‚ â”‚
â”‚ â”‚ â”‚     â”‚ â”‚ â”‚     â”‚ â”‚ â”‚Call â”‚ â”‚ â”‚     â”‚ â”‚ â”‚     â”‚ â”‚ â”‚Lakhâ”‚ â”‚ â”‚
â”‚ â”‚ â””â”€â”€â”€â”€â”€â”˜ â”‚ â””â”€â”€â”€â”€â”€â”˜ â”‚ â””â”€â”€â”€â”€â”€â”˜ â”‚ â””â”€â”€â”€â”€â”€â”˜ â”‚ â””â”€â”€â”€â”€â”€â”˜ â”‚ â””â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚ â”‚         â”‚         â”‚         â”‚         â”‚         â”‚         â”‚ â”‚
â”‚ â”‚ [+ 4]   â”‚ [+ 10]  â”‚ [+ 6]   â”‚ [+ 3]   â”‚         â”‚ [+ 1]   â”‚ â”‚
â”‚ â”‚         â”‚         â”‚         â”‚         â”‚         â”‚         â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                 â”‚
â”‚ Drag & drop to move between stages                             â”‚
â”‚                                                                 â”‚
â”‚ Pipeline Value: â‚¹12.5 Cr  |  Conversion Rate: 18%  |  Avg Daysâ”‚
â”‚                                                      to Close: 45â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Lead Card Detail (Expanded)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Amit Patel                            [Ã—]        â”‚
â”‚ ðŸ”¥ HOT LEAD  â€¢  Assigned 2 hours ago             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                  â”‚
â”‚ ðŸ“Š LEAD SCORE: 92/100                           â”‚
â”‚ [â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘] Very High              â”‚
â”‚                                                  â”‚
â”‚ CONTACT INFO                                     â”‚
â”‚ ðŸ“± +91 98765-12345  [Call] [WhatsApp]           â”‚
â”‚ âœ‰ï¸  amit.patel@email.com                        â”‚
â”‚                                                  â”‚
â”‚ REQUIREMENTS                                     â”‚
â”‚ â€¢ Budget: â‚¹85L - â‚¹95L                           â”‚
â”‚ â€¢ Configuration: 3 BHK                           â”‚
â”‚ â€¢ Location: Gachibowli, Kondapur                â”‚
â”‚ â€¢ Timeline: Urgent (< 1 month)                   â”‚
â”‚ â€¢ Financing: Loan required (80%)                 â”‚
â”‚                                                  â”‚
â”‚ PROPERTY INTEREST                                â”‚
â”‚ Prestige Lakeside Habitat                        â”‚
â”‚ Tower A, Unit 1201 â€¢ 3 BHK â€¢ â‚¹87L               â”‚
â”‚ Unlocked insider access âœ“                        â”‚
â”‚ [View Property Details â†’]                        â”‚
â”‚                                                  â”‚
â”‚ ACTIVITY HISTORY                                 â”‚
â”‚ â€¢ 2 hours ago: Unlocked property (â‚¹2,999 paid)  â”‚
â”‚ â€¢ 3 hours ago: Viewed verification report       â”‚
â”‚ â€¢ 5 hours ago: Used AI chat (12 questions)      â”‚
â”‚ â€¢ Yesterday: Viewed 3 properties                 â”‚
â”‚                                                  â”‚
â”‚ AI INSIGHTS                                      â”‚
â”‚ ðŸ’¡ High conversion probability (87%)             â”‚
â”‚ ðŸ’¡ Financing pre-approved (HDFC â‚¹70L)           â”‚
â”‚ ðŸ’¡ Competitor also contacted (99acres)           â”‚
â”‚ âš¡ Recommended action: Call within 30 minutes    â”‚
â”‚                                                  â”‚
â”‚ NOTES & COMMENTS                                 â”‚
â”‚ [Add note...]                                    â”‚
â”‚                                                  â”‚
â”‚ Nov 28, 2024 - Priya:                           â”‚
â”‚ "Called customer. Very interested. Wife wants   â”‚
â”‚ to see property this weekend. Scheduled site    â”‚
â”‚ visit for Saturday 10 AM."                      â”‚
â”‚                                                  â”‚
â”‚ QUICK ACTIONS                                    â”‚
â”‚ [Schedule Visit] [Send Proposal] [Mark Won]     â”‚
â”‚ [Mark Lost]      [Transfer Lead]                â”‚
â”‚                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

interface LeadScore {
  total: number  // 0-100
  breakdown: {
    engagement: number       // 0-30 (app activity)
    intent: number          // 0-25 (actions taken)
    qualification: number   // 0-20 (budget match)
    urgency: number         // 0-15 (timeline)
    financing: number       // 0-10 (loan status)
  }
}

function calculateLeadScore(lead: Lead): LeadScore {
  const engagement = calculateEngagement(lead.activity)
  const intent = calculateIntent(lead.actions)
  const qualification = calculateQualification(lead.requirements)
  const urgency = calculateUrgency(lead.timeline)
  const financing = calculateFinancing(lead.loanStatus)
  
  return {
    total: engagement + intent + qualification + urgency + financing,
    breakdown: {
      engagement,
      intent,
      qualification,
      urgency,
      financing
    }
  }
}

function calculateEngagement(activity: Activity[]): number {
  let score = 0
  
  // Property views
  score += Math.min(activity.propertyViews * 2, 10)
  
  // Time spent
  const avgTimeMinutes = activity.avgTimeOnProperty / 60
  score += Math.min(avgTimeMinutes, 10)
  
  // AI chat usage
  score += Math.min(activity.aiQuestions, 10)
  
  return Math.min(score, 30)
}

function calculateIntent(actions: Action[]): number {
  let score = 0
  
  if (actions.includes('unlocked_property')) score += 15
  if (actions.includes('viewed_documents')) score += 5
  if (actions.includes('used_emi_calculator')) score += 3
  if (actions.includes('shared_with_family')) score += 2
  
  return Math.min(score, 25)
}
```

## Filters & Sorting
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ FILTERS                    â”‚
â”‚                            â”‚
â”‚ Priority:                  â”‚
â”‚ â˜‘ Hot leads                â”‚
â”‚ â˜‘ Warm leads               â”‚
â”‚ â˜ Cold leads               â”‚
â”‚                            â”‚
â”‚ Budget Range:              â”‚
â”‚ â‚¹[70L] â”€â”€â—â”€â”€â”€â”€ [â‚¹1Cr]    â”‚
â”‚                            â”‚
â”‚ Location:                  â”‚
â”‚ â˜‘ Gachibowli               â”‚
â”‚ â˜‘ Kondapur                 â”‚
â”‚ â˜ Manikonda                â”‚
â”‚ â˜ Kokapet                  â”‚
â”‚                            â”‚
â”‚ Property Type:             â”‚
â”‚ â˜‘ Apartment                â”‚
â”‚ â˜ Villa                    â”‚
â”‚ â˜ Plot                     â”‚
â”‚                            â”‚
â”‚ Assigned Date:             â”‚
â”‚ â—‹ Today                    â”‚
â”‚ â— This Week                â”‚
â”‚ â—‹ This Month               â”‚
â”‚ â—‹ Custom Range             â”‚
â”‚                            â”‚
â”‚ [Clear Filters] [Apply]    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

SORT BY:
- Lead Score (High to Low) âœ“
- Assigned Date (Newest)
- Last Activity (Recent)
- Budget (Highest)
- Response Time (Fastest needed)
```

## Bulk Actions
```
Select multiple leads:

[âœ“] 3 leads selected

Actions:
- Assign to colleague
- Send bulk WhatsApp
- Schedule group site visit
- Export to CSV
- Mark as cold
- Delete

lead_management:
  pipeline_stages:
    - id: "new"
      label: "New Leads"
      color: "#F4A261"
      auto_progress: false
    
    - id: "contacted"
      label: "Contacted"
      color: "#3B82F6"
      auto_progress: false
    
    - id: "visit_scheduled"
      label: "Visit Scheduled"
      color: "#8B5CF6"
      auto_progress: true  # After booking
    
    - id: "negotiating"
      label: "Negotiating"
      color: "#F59E0B"
      auto_progress: false
    
    - id: "agreement"
      label: "Agreement"
      color: "#10B981"
      auto_progress: true  # After token
    
    - id: "closed_won"
      label: "Closed"
      color: "#2A9D8F"
      auto_progress: true  # After registration
  
  scoring:
    enabled: true
    weights:
      engagement: 0.30
      intent: 0.25
      qualification: 0.20
      urgency: 0.15
      financing: 0.10
  
  automations:
    enabled: true
    rules:
      - new_lead_welcome
      - no_response_alert
      - cold_lead_reengagement
  
  commission:
    calculation: "auto"
    rates:
      standard: 1.5
      premium: 2.0
      custom: true
```

## Testing

- [ ] Pipeline drag-and-drop works
- [ ] Lead cards expand correctly
- [ ] Filters apply properly
- [ ] Sorting works
- [ ] Bulk actions function
- [ ] Commission calculator accurate
- [ ] Analytics display correctly
- [ ] Mobile swipe gestures work
- [ ] Real-time updates
- [ ] Performance optimized

CP_LEADS

echo "âœ… CP Portal screens created!"
echo ""

# ============================================================
# BUILDER PORTAL SCREENS
# ============================================================

echo "ðŸ—ï¸  Creating Builder Portal Screens..."

cat > "$UX_DIR/screens/builder/01-builder-dashboard.md" << 'BUILDER_DASH'
# BUILDER DASHBOARD - MY HOME GROUP

## Overview
Enterprise dashboard for builders to manage projects, inventory, leads, and sales performance.

## Main Interface
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ MY HOME GROUP                           ðŸ””(12)  ðŸ‘¤ Admin     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚ â”‚ PORTFOLIO OVERVIEW                         [View All]    â”‚â”‚
â”‚ â”‚                                                          â”‚â”‚
â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚â”‚
â”‚ â”‚ â”‚  Projects  â”‚ Total Unitsâ”‚  Sold      â”‚  Available â”‚â”‚
â”‚ â”‚ â”‚            â”‚            â”‚            â”‚            â”‚â”‚
â”‚ â”‚ â”‚     12     â”‚   1,842    â”‚   1,486    â”‚     356    â”‚â”‚
â”‚ â”‚ â”‚  3 Launch  â”‚            â”‚   80.7%    â”‚   19.3%    â”‚â”‚
â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                              â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚ â”‚ ACTIVE PROJECTS                               [+ New]    â”‚â”‚
â”‚ â”‚                                                          â”‚â”‚
â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚â”‚
â”‚ â”‚ â”‚ My Home Bhooja â€¢ Gachibowli                      â”‚   â”‚â”‚
â”‚ â”‚ â”‚ Status: Under Construction (60% complete)         â”‚   â”‚â”‚
â”‚ â”‚ â”‚                                                   â”‚   â”‚â”‚
â”‚ â”‚ â”‚ [â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘] 60%                         â”‚   â”‚â”‚
â”‚ â”‚ â”‚                                                   â”‚   â”‚â”‚
â”‚ â”‚ â”‚ Total Units: 420 â€¢ Sold: 312 (74%)              â”‚   â”‚â”‚
â”‚ â”‚ â”‚ Available: 108 units                             â”‚   â”‚â”‚
â”‚ â”‚ â”‚ Possession: Dec 2025                             â”‚   â”‚â”‚
â”‚ â”‚ â”‚                                                   â”‚   â”‚â”‚
â”‚ â”‚ â”‚ This Month: 18 leads â€¢ 8 site visits â€¢ 3 sold   â”‚   â”‚â”‚
â”‚ â”‚ â”‚                                                   â”‚   â”‚â”‚
â”‚ â”‚ â”‚ [View Project] [Manage Inventory] [Marketing]    â”‚   â”‚â”‚
â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚â”‚
â”‚ â”‚                                                          â”‚â”‚
â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚â”‚
â”‚ â”‚ â”‚ My Home Vihanga â€¢ Manikonda                      â”‚   â”‚â”‚
â”‚ â”‚ â”‚ Status: Ready to Move                             â”‚   â”‚â”‚
â”‚ â”‚ â”‚                                                   â”‚   â”‚â”‚
â”‚ â”‚ â”‚ Total Units: 324 â€¢ Sold: 298 (92%)              â”‚   â”‚â”‚
â”‚ â”‚ â”‚ Available: 26 units (Premium inventory)          â”‚   â”‚â”‚
â”‚ â”‚ â”‚ Possession: Immediate                            â”‚   â”‚â”‚
â”‚ â”‚ â”‚                                                   â”‚   â”‚â”‚
â”‚ â”‚ â”‚ This Month: 24 leads â€¢ 12 visits â€¢ 5 sold       â”‚   â”‚â”‚
â”‚ â”‚ â”‚                                                   â”‚   â”‚â”‚
â”‚ â”‚ â”‚ [View Project] [Price Adjustment] [Offers]       â”‚   â”‚â”‚
â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                              â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚ â”‚ SALES PIPELINE                    [Filter by Project]    â”‚â”‚
â”‚ â”‚                                                          â”‚â”‚
â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”     â”‚â”‚
â”‚ â”‚ â”‚Leads â”‚Site  â”‚Propo â”‚Token â”‚Agree â”‚Regis â”‚Done  â”‚     â”‚â”‚
â”‚ â”‚ â”‚      â”‚Visit â”‚sal   â”‚      â”‚ment  â”‚tered â”‚      â”‚     â”‚â”‚
â”‚ â”‚ â”‚      â”‚      â”‚      â”‚      â”‚      â”‚      â”‚      â”‚     â”‚â”‚
â”‚ â”‚ â”‚ 142  â”‚  68  â”‚  42  â”‚  18  â”‚  12  â”‚   8  â”‚  5   â”‚     â”‚â”‚
â”‚ â”‚ â”‚      â”‚      â”‚      â”‚      â”‚      â”‚      â”‚      â”‚     â”‚â”‚
â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”˜     â”‚â”‚
â”‚ â”‚                                                          â”‚â”‚
â”‚ â”‚ Pipeline Value: â‚¹142 Cr                                  â”‚â”‚
â”‚ â”‚ Conversion Rate: 3.5% (Target: 5%)                      â”‚â”‚
â”‚ â”‚ Avg Days to Close: 52 days                              â”‚â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                              â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚ â”‚ CHANNEL PARTNER PERFORMANCE               [View All]     â”‚â”‚
â”‚ â”‚                                                          â”‚â”‚
â”‚ â”‚ Top Performers This Month:                               â”‚â”‚
â”‚ â”‚                                                          â”‚â”‚
â”‚ â”‚ 1. Priya Sharma      8 closures  â‚¹6.8 Cr  â­ 4.9       â”‚â”‚
â”‚ â”‚ 2. Karthik Reddy     6 closures  â‚¹5.2 Cr  â­ 4.8       â”‚â”‚
â”‚ â”‚ 3. Anjali Mehta      5 closures  â‚¹4.1 Cr  â­ 4.7       â”‚â”‚
â”‚ â”‚                                                          â”‚â”‚
â”‚ â”‚ Total CPs: 45  â€¢  Active: 38  â€¢  Avg Rating: 4.6/5     â”‚â”‚
â”‚ â”‚                                                          â”‚â”‚
â”‚ â”‚ [CP Leaderboard] [Assign Leads] [CP Analytics]          â”‚â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                              â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚ â”‚ MARKETING PERFORMANCE                     [Campaign]     â”‚â”‚
â”‚ â”‚                                                          â”‚â”‚
â”‚ â”‚ Lead Sources (This Month):                               â”‚â”‚
â”‚ â”‚ â€¢ Propmubi Platform:   68 leads  [â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘] 48%   â”‚â”‚
â”‚ â”‚ â€¢ Direct Walk-ins:     42 leads  [â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘] 30%   â”‚â”‚
â”‚ â”‚ â€¢ Referrals:           18 leads  [â–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘] 13%   â”‚â”‚
â”‚ â”‚ â€¢ Other Portals:       12 leads  [â–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘]  9%   â”‚â”‚
â”‚ â”‚                                                          â”‚â”‚
â”‚ â”‚ Propmubi ROI: â‚¹12 Cr sales / â‚¹8L spend = 15x ROI        â”‚â”‚
â”‚ â”‚                                                          â”‚â”‚
â”‚ â”‚ [Increase Budget] [View Analytics]                       â”‚â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Project Management View
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ My Home Bhooja - Project Details                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                      â”‚
â”‚ [Overview] [Inventory] [Leads] [Marketing] [Docs]   â”‚
â”‚                                                      â”‚
â”‚ CONSTRUCTION PROGRESS                                â”‚
â”‚                                                      â”‚
â”‚ Overall: 60% Complete                                â”‚
â”‚ [â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘] 60%                          â”‚
â”‚                                                      â”‚
â”‚ Tower-wise Progress:                                 â”‚
â”‚ Tower A: [â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘] 80%  (On track)       â”‚
â”‚ Tower B: [â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘] 60%  (On track)       â”‚
â”‚ Tower C: [â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘] 40%  (2 weeks delay)  â”‚
â”‚                                                      â”‚
â”‚ Milestones:                                          â”‚
â”‚ âœ… Foundation Complete - Jan 2024                    â”‚
â”‚ âœ… Structure 50% - Jun 2024                          â”‚
â”‚ ðŸ”„ Structure 100% - Dec 2024 (In progress)          â”‚
â”‚ â³ Interior Work - Mar 2025                          â”‚
â”‚ â³ Handover - Dec 2025                               â”‚
â”‚                                                      â”‚
â”‚ â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” â”‚
â”‚                                                      â”‚
â”‚ INVENTORY STATUS                                     â”‚
â”‚                                                      â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚ â”‚ Type       â”‚Total â”‚ Sold â”‚Avail â”‚ %    â”‚          â”‚
â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¤          â”‚
â”‚ â”‚ 2 BHK      â”‚  180 â”‚  142 â”‚   38 â”‚ 79%  â”‚          â”‚
â”‚ â”‚ 3 BHK      â”‚  192 â”‚  150 â”‚   42 â”‚ 78%  â”‚          â”‚
â”‚ â”‚ 4 BHK      â”‚   36 â”‚   18 â”‚   18 â”‚ 50%  â”‚          â”‚
â”‚ â”‚ Penthouse  â”‚   12 â”‚    2 â”‚   10 â”‚ 17%  â”‚          â”‚
â”‚ â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”‚          â”‚
â”‚ â”‚ TOTAL      â”‚  420 â”‚  312 â”‚  108 â”‚ 74%  â”‚          â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚                                                      â”‚
â”‚ [Update Pricing] [Mark Sold] [Special Offers]       â”‚
â”‚                                                      â”‚
â”‚ â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” â”‚
â”‚                                                      â”‚
â”‚ PRICING MATRIX                                       â”‚
â”‚                                                      â”‚
â”‚ 2 BHK (1250 sqft):                                   â”‚
â”‚ â€¢ Base Price: â‚¹78.5L (â‚¹6,280/sqft)                  â”‚
â”‚ â€¢ Premium (High Floor): +â‚¹5L                         â”‚
â”‚ â€¢ Corner Unit: +â‚¹3L                                  â”‚
â”‚ â€¢ Park Facing: +â‚¹2L                                  â”‚
â”‚                                                      â”‚
â”‚ 3 BHK (1650 sqft):                                   â”‚
â”‚ â€¢ Base Price: â‚¹1.02 Cr (â‚¹6,181/sqft)                â”‚
â”‚ â€¢ Premium: +â‚¹8L                                      â”‚
â”‚                                                      â”‚
â”‚ Current Offers:                                      â”‚
â”‚ ðŸŽ Limited Time: â‚¹3L off on select units            â”‚
â”‚ ðŸŽ Zero Registration Charges                         â”‚
â”‚ ðŸŽ Modular Kitchen Free (Till Dec 31)                â”‚
â”‚                                                      â”‚
â”‚ [Edit Pricing] [Create Offer] [Price History]       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Unit Selection Matrix (Interactive)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Tower A - Floor Plan                                 â”‚
â”‚                                                      â”‚
â”‚ Select floor: [12 â–¼]  Configuration: [All â–¼]       â”‚
â”‚                                                      â”‚
â”‚        Corridor                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”                      â”‚
â”‚  â”‚      â”‚      â”‚      â”‚      â”‚                      â”‚
â”‚  â”‚ 1201 â”‚ 1202 â”‚ 1203 â”‚ 1204 â”‚                      â”‚
â”‚  â”‚      â”‚      â”‚      â”‚      â”‚                      â”‚
â”‚  â”‚ 2BHK â”‚ 3BHK â”‚ 3BHK â”‚ 2BHK â”‚                      â”‚
â”‚  â”‚ 1250 â”‚ 1650 â”‚ 1650 â”‚ 1250 â”‚                      â”‚
â”‚  â”‚      â”‚      â”‚      â”‚      â”‚                      â”‚
â”‚  â”‚ âœ…   â”‚ âŒ   â”‚ âœ…   â”‚ âŒ   â”‚                      â”‚
â”‚  â”‚â‚¹82L  â”‚SOLD  â”‚â‚¹85L  â”‚SOLD  â”‚                      â”‚
â”‚  â”‚      â”‚      â”‚      â”‚      â”‚                      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”˜                      â”‚
â”‚                                                      â”‚
â”‚  Legend:                                             â”‚
â”‚  âœ… Available  âŒ Sold  ðŸ”’ Blocked  ðŸ”„ Hold         â”‚
â”‚                                                      â”‚
â”‚  Click unit for details                              â”‚
â”‚                                                      â”‚
â”‚  Bulk Actions:                                       â”‚
â”‚  [Select Multiple] [Block Units] [Release Units]    â”‚
â”‚  [Apply Discount] [Export List]                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Lead Distribution & Assignment
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ LEAD DISTRIBUTION RULES                              â”‚
â”‚                                                      â”‚
â”‚ Auto-Assignment Strategy:                            â”‚
â”‚                                                      â”‚
â”‚ â—‹ Round Robin (equal distribution)                   â”‚
â”‚ â— Performance-based (top performers get more)        â”‚
â”‚ â—‹ Manual assignment only                             â”‚
â”‚ â—‹ Custom rules                                       â”‚
â”‚                                                      â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚ â”‚ ASSIGNMENT RULES                               â”‚  â”‚
â”‚ â”‚                                                â”‚  â”‚
â”‚ â”‚ IF lead_score >= 80 (Hot)                      â”‚  â”‚
â”‚ â”‚ THEN assign_to: Top 5 CPs                      â”‚  â”‚
â”‚ â”‚                                                â”‚  â”‚
â”‚ â”‚ IF location = "Gachibowli"                     â”‚  â”‚
â”‚ â”‚ THEN assign_to: CPs specialized in Gachibowli  â”‚  â”‚
â”‚ â”‚                                                â”‚  â”‚
â”‚ â”‚ IF budget > â‚¹1Cr                               â”‚  â”‚
â”‚ â”‚ THEN assign_to: Senior CPs only                â”‚  â”‚
â”‚ â”‚                                                â”‚  â”‚
â”‚ â”‚ [+ Add Rule]                                   â”‚  â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                      â”‚
â”‚ CP Performance Criteria:                             â”‚
â”‚ â€¢ Conversion rate > 15%                              â”‚
â”‚ â€¢ Avg rating > 4.5                                   â”‚
â”‚ â€¢ Response time < 2 hours                            â”‚
â”‚ â€¢ Active in last 7 days                              â”‚
â”‚                                                      â”‚
â”‚ [Save Rules] [Test Assignment]                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Analytics Dashboard (Builder)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ SALES ANALYTICS                  [Export] [Filter]  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                      â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚ â”‚ MONTHLY SALES TREND                            â”‚  â”‚
â”‚ â”‚                                                â”‚  â”‚
â”‚ â”‚     â”‚                                          â”‚  â”‚
â”‚ â”‚  20 â”‚        â—                                 â”‚  â”‚
â”‚ â”‚     â”‚       â•± â•²                                â”‚  â”‚
â”‚ â”‚  15 â”‚      â•±   â•²     â—                         â”‚  â”‚
â”‚ â”‚     â”‚     â•±     â•²   â•± â•²                        â”‚  â”‚
â”‚ â”‚  10 â”‚    â•±       â— â•±   â•²                       â”‚  â”‚
â”‚ â”‚     â”‚   â—             â•²  â—                     â”‚  â”‚
â”‚ â”‚   5 â”‚                  â•²â•±                      â”‚  â”‚
â”‚ â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€           â”‚  â”‚
â”‚ â”‚      J   F   M   A   M   J   N                â”‚  â”‚
â”‚ â”‚                                                â”‚  â”‚
â”‚ â”‚ Peak: May (18 units) | Low: June (8 units)    â”‚  â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                      â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚ â”‚ REVENUE BY SOURCE                              â”‚  â”‚
â”‚ â”‚                                                â”‚  â”‚
â”‚ â”‚ Propmubi:        â‚¹142 Cr  [â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘] 48%â”‚  â”‚
â”‚ â”‚ Direct Sales:    â‚¹92 Cr   [â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘] 31%â”‚  â”‚
â”‚ â”‚ Referrals:       â‚¹38 Cr   [â–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘] 13%â”‚  â”‚
â”‚ â”‚ Channel Partners:â‚¹24 Cr   [â–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘]  8%â”‚  â”‚
â”‚ â”‚                                                â”‚  â”‚
â”‚ â”‚ Total Revenue: â‚¹296 Cr                         â”‚  â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                      â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚ â”‚ CUSTOMER ACQUISITION COST (CAC)                â”‚  â”‚
â”‚ â”‚                                                â”‚  â”‚
â”‚ â”‚ Propmubi:        â‚¹42,000/customer              â”‚  â”‚
â”‚ â”‚ 99acres:         â‚¹68,000/customer              â”‚  â”‚
â”‚ â”‚ MagicBricks:     â‚¹72,000/customer              â”‚  â”‚
â”‚ â”‚ Direct:          â‚¹85,000/customer              â”‚  â”‚
â”‚ â”‚                                                â”‚  â”‚
â”‚ â”‚ âœ… Propmubi provides 38% lower CAC             â”‚  â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                      â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚ â”‚ CUSTOMER DEMOGRAPHICS                          â”‚  â”‚
â”‚ â”‚                                                â”‚  â”‚
â”‚ â”‚ Age Groups:                                    â”‚  â”‚
â”‚ â”‚ 25-35: 45%  [â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘] IT Professionals â”‚  â”‚
â”‚ â”‚ 36-45: 32%  [â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘] Entrepreneurs    â”‚  â”‚
â”‚ â”‚ 46-55: 18%  [â–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘] Business Owners  â”‚  â”‚
â”‚ â”‚ 55+:    5%  [â–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘] Retirees         â”‚  â”‚
â”‚ â”‚                                                â”‚  â”‚
â”‚ â”‚ Income Brackets:                               â”‚  â”‚
â”‚ â”‚ â‚¹15-25L:  38%                                  â”‚  â”‚
â”‚ â”‚ â‚¹25-50L:  42%                                  â”‚  â”‚
â”‚ â”‚ â‚¹50L+:    20%                                  â”‚  â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Document Management (Builder)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ PROJECT DOCUMENTS - My Home Bhooja                   â”‚
â”‚                                                      â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚ â”‚ LEGAL & APPROVALS                              â”‚  â”‚
â”‚ â”‚                                                â”‚  â”‚
â”‚ â”‚ âœ… RERA Certificate                            â”‚  â”‚
â”‚ â”‚    REG-NO: P52100012345                        â”‚  â”‚
â”‚ â”‚    Valid till: Dec 2026                        â”‚  â”‚
â”‚ â”‚    [View] [Download] [Verify on RERA Portal]  â”‚  â”‚
â”‚ â”‚                                                â”‚  â”‚
â”‚ â”‚ âœ… Building Plan Approval                      â”‚  â”‚
â”‚ â”‚    GHMC Approval No: BP/2022/4567              â”‚  â”‚
â”‚ â”‚    Date: 15-Jan-2022                           â”‚  â”‚
â”‚ â”‚    [View] [Download]                           â”‚  â”‚
â”‚ â”‚                                                â”‚  â”‚
â”‚ â”‚ âœ… Occupancy Certificate (Partial - Tower A)   â”‚  â”‚
â”‚ â”‚    Issued: 10-Oct-2024                         â”‚  â”‚
â”‚ â”‚    [View] [Download]                           â”‚  â”‚
â”‚ â”‚                                                â”‚  â”‚
â”‚ â”‚ â³ Environmental Clearance                     â”‚  â”‚
â”‚ â”‚    Status: Approved                            â”‚  â”‚
â”‚ â”‚    [View] [Download]                           â”‚  â”‚
â”‚ â”‚                                                â”‚  â”‚
â”‚ â”‚ âœ… Fire NOC                                    â”‚  â”‚
â”‚ â”‚ âœ… Water Connection NOC                        â”‚  â”‚
â”‚ â”‚ âœ… Electrical NOC                              â”‚  â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                      â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚ â”‚ FINANCIAL DOCUMENTS                            â”‚  â”‚
â”‚ â”‚                                                â”‚  â”‚
â”‚ â”‚ âœ… Escrow Account Statement                    â”‚  â”‚
â”‚ â”‚    Updated: 25-Nov-2024                        â”‚  â”‚
â”‚ â”‚    Balance: â‚¹24.5 Cr                           â”‚  â”‚
â”‚ â”‚    [View] [Download]                           â”‚  â”‚
â”‚ â”‚                                                â”‚  â”‚
â”‚ â”‚ âœ… GST Registration Certificate                â”‚  â”‚
â”‚ â”‚ âœ… PAN Card (Company)                          â”‚  â”‚
â”‚ â”‚ âœ… Company Registration (MCA)                  â”‚  â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                      â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚ â”‚ TECHNICAL DOCUMENTS                            â”‚  â”‚
â”‚ â”‚                                                â”‚  â”‚
â”‚ â”‚ âœ… Structural Design Drawings                  â”‚  â”‚
â”‚ â”‚ âœ… Architectural Plans                         â”‚  â”‚
â”‚ â”‚ âœ… MEP Drawings                                â”‚  â”‚
â”‚ â”‚ âœ… Specifications Document                     â”‚  â”‚
â”‚ â”‚ âœ… BIS Certifications (Materials)              â”‚  â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                      â”‚
â”‚ [Upload New Document] [Bulk Download] [Share]       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

builder_portal:
  features:
    project_management: true
    inventory_control: true
    lead_distribution: true
    cp_management: true
    analytics: true
    document_vault: true
    pricing_matrix: true
    marketing_campaigns: true
  
  permissions:
    admin:
      - manage_all_projects
      - assign_cps
      - approve_pricing
      - view_financials
    
    project_manager:
      - manage_assigned_project
      - update_inventory
      - view_leads
      - upload_documents
    
    sales_manager:
      - view_leads
      - assign_cps
      - update_pipeline
      - generate_reports
  
  integrations:
    crm: "salesforce"
    accounting: "tally"
    construction_mgmt: "procore"
    email: "sendgrid"
    sms: "twilio"
```

BUILDER_DASH

echo "âœ… Builder Portal screens created!"
echo ""

# ============================================================
# ENTERPRISE DESIGN PATTERNS
# ============================================================

echo "ðŸŽ¯ Creating Enterprise Design Patterns..."

cat > "$PATTERNS_DIR/architectural/01-clean-architecture.md" << 'CLEAN_ARCH'
# CLEAN ARCHITECTURE PATTERN

## Overview
Implementation of Uncle Bob's Clean Architecture for Propmubi ensuring separation of concerns, testability, and maintainability.

## Layer Structure
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  PRESENTATION                       â”‚
â”‚  (React Components, React Native Screens)           â”‚
â”‚                                                     â”‚
â”‚  - PropertyCard.tsx                                 â”‚
â”‚  - PropertyDetailsScreen.tsx                        â”‚
â”‚  - AIChat.tsx                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚ Depends on â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              APPLICATION LAYER                      â”‚
â”‚           (Use Cases / Interactors)                 â”‚
â”‚                                                     â”‚
â”‚  - SearchPropertiesUseCase                          â”‚
â”‚  - UnlockPropertyUseCase                            â”‚
â”‚  - BookSiteVisitUseCase                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚ Depends on â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚               DOMAIN LAYER                          â”‚
â”‚          (Business Logic / Entities)                â”‚
â”‚                                                     â”‚
â”‚  - Property (Entity)                                â”‚
â”‚  - User (Entity)                                    â”‚
â”‚  - VerificationScore (Value Object)                 â”‚
â”‚  - PropertyRepository (Interface)                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚ Depends on â†‘
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            INFRASTRUCTURE LAYER                     â”‚
â”‚      (Frameworks, Databases, External APIs)         â”‚
â”‚                                                     â”‚
â”‚  - PropertyRepositoryImpl                           â”‚
â”‚  - PostgreSQLDatabase                               â”‚
â”‚  - RERAPortalConnector                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

// packages/domain/src/entities/Property.ts

export class Property {
  constructor(
    public readonly id: PropertyId,
    public title: string,
    public location: Location,
    public pricing: Pricing,
    public verification: VerificationResult,
    private status: PropertyStatus
  ) {}
  
  // Business logic methods
  canBeUnlocked(user: User): boolean {
    return this.status === 'active' && 
           !user.hasUnlocked(this.id) &&
           this.verification.score >= 60
  }
  
  calculateTotalCost(): Money {
    return this.pricing.basePrice
      .add(this.pricing.stampDuty)
      .add(this.pricing.registration)
      .add(this.pricing.otherCharges)
  }
  
  isEligibleForLoan(): boolean {
    return this.verification.legal.clearTitle &&
           this.verification.rera.isRegistered &&
           this.status === 'active'
  }
}

// Domain interfaces (contracts)
export interface PropertyRepository {
  findById(id: PropertyId): Promise<Property>
  search(criteria: SearchCriteria): Promise<Property[]>
  save(property: Property): Promise<void>
}
// packages/application/src/use-cases/UnlockPropertyUseCase.ts

export class UnlockPropertyUseCase {
  constructor(
    private propertyRepo: PropertyRepository,
    private paymentGateway: PaymentGateway,
    private notificationService: NotificationService,
    private eventBus: EventBus
  ) {}
  
  async execute(request: UnlockPropertyRequest): Promise<UnlockPropertyResponse> {
    // 1. Validate
    const property = await this.propertyRepo.findById(request.propertyId)
    const user = await this.userRepo.findById(request.userId)
    
    if (!property.canBeUnlocked(user)) {
      throw new PropertyCannotBeUnlockedException()
    }
    
    // 2. Process payment
    const payment = await this.paymentGateway.charge({
      amount: UNLOCK_FEE,
      userId: user.id,
      description: `Unlock property: ${property.title}`
    })
    
    if (!payment.isSuccessful()) {
      throw new PaymentFailedException()
    }
    
    // 3. Update domain
    const unlock = user.unlockProperty(property.id, payment)
    await this.userRepo.save(user)
    
    // 4. Trigger side effects
    await this.notificationService.send({
      to: user,
      template: 'property_unlocked',
      data: { property }
    })
    
    this.eventBus.publish(new PropertyUnlockedEvent({
      propertyId: property.id,
      userId: user.id,
      timestamp: new Date()
    }))
    
    // 5. Return result
    return {
      success: true,
      unlock,
      accessGranted: {
        verificationReport: true,
        documents: true,
        siteVisitBooking: true
      }
    }
  }
}
// packages/infrastructure/src/repositories/PropertyRepositoryImpl.ts

export class PropertyRepositoryImpl implements PropertyRepository {
  constructor(
    private db: PostgreSQLClient,
    private cache: RedisClient
  ) {}
  
  async findById(id: PropertyId): Promise<Property> {
    // Check cache first
    const cached = await this.cache.get(`property:${id.value}`)
    if (cached) {
      return this.toDomain(JSON.parse(cached))
    }
    
    // Query database
    const row = await this.db.query(
      'SELECT * FROM properties WHERE id = $1',
      [id.value]
    )
    
    if (!row) {
      throw new PropertyNotFoundException(id)
    }
    
    const property = this.toDomain(row)
    
    // Cache for future
    await this.cache.setex(
      `property:${id.value}`,
      300, // 5 minutes
      JSON.stringify(row)
    )
    
    return property
  }
  
  async search(criteria: SearchCriteria): Promise<Property[]> {
    const query = this.buildSearchQuery(criteria)
    const rows = await this.db.query(query.sql, query.params)
    return rows.map(row => this.toDomain(row))
  }
  
  private toDomain(row: any): Property {
    return new Property(
      new PropertyId(row.id),
      row.title,
      Location.from(row.location),
      Pricing.from(row.pricing),
      VerificationResult.from(row.verification),
      row.status
    )
  }
}

// apps/mobile/src/screens/PropertyDetailsScreen.tsx

export const PropertyDetailsScreen: React.FC<Props> = ({ propertyId }) => {
  const unlockProperty = useUnlockPropertyUseCase()
  const property = useProperty(propertyId)
  
  const handleUnlock = async () => {
    try {
      setLoading(true)
      
      const result = await unlockProperty.execute({
        propertyId,
        userId: currentUser.id
      })
      
      if (result.success) {
        navigation.navigate('VerificationReport', { propertyId })
        toast.success('Property unlocked!')
      }
    } catch (error) {
      if (error instanceof PropertyCannotBeUnlockedException) {
        toast.error('This property cannot be unlocked')
      } else if (error instanceof PaymentFailedException) {
        toast.error('Payment failed. Please try again.')
      } else {
        toast.error('Something went wrong')
      }
    } finally {
      setLoading(false)
    }
  }
  
  return (
    <ScrollView>
      <PropertyHeader property={property} />
      <VerificationScoreBadge score={property.verification.score} />
      
      {property.canBeUnlocked(currentUser) && (
        <Button
          variant="primary"
          onPress={handleUnlock}
          loading={loading}
        >
          Unlock Insider Access - â‚¹2,999
        </Button>
      )}
    </ScrollView>
  )
}

// Custom hook for use case
function useUnlockPropertyUseCase() {
  const propertyRepo = usePropertyRepository()
  const paymentGateway = usePaymentGateway()
  const notificationService = useNotificationService()
  const eventBus = useEventBus()
  
  return useMemo(
    () => new UnlockPropertyUseCase(
      propertyRepo,
      paymentGateway,
      notificationService,
      eventBus
    ),
    [propertyRepo, paymentGateway, notificationService, eventBus]
  )
}

// packages/infrastructure/src/di/container.ts

import { Container } from 'inversify'

const container = new Container()

// Bind repositories
container.bind<PropertyRepository>('PropertyRepository')
  .to(PropertyRepositoryImpl)
  .inSingletonScope()

container.bind<UserRepository>('UserRepository')
  .to(UserRepositoryImpl)
  .inSingletonScope()

// Bind services
container.bind<PaymentGateway>('PaymentGateway')
  .to(RazorpayGateway)
  .inSingletonScope()

container.bind<NotificationService>('NotificationService')
  .to(WhatsAppNotificationService)
  .inSingletonScope()

// Bind use cases
container.bind<UnlockPropertyUseCase>('UnlockPropertyUseCase')
  .to(UnlockPropertyUseCase)
  .inTransientScope()

export { container }
describe('Property Entity', () => {
  it('should calculate total cost correctly', () => {
    const property = new Property(
      new PropertyId('prop_123'),
      'Test Property',
      location,
      new Pricing({
        basePrice: new Money(8500000),
        stampDuty: new Money(510000),
        registration: new Money(85000),
        otherCharges: new Money(100000)
      }),
      verificationResult,
      'active'
    )
    
    const totalCost = property.calculateTotalCost()
    
    expect(totalCost.value).toBe(9195000) // â‚¹91.95L
  })
  
  it('should allow unlock only if score >= 60', () => {
    const property = createProperty({ verificationScore: 55 })
    const user = createUser()
    
    expect(property.canBeUnlocked(user)).toBe(false)
    
    const goodProperty = createProperty({ verificationScore: 85 })
    expect(goodProperty.canBeUnlocked(user)).toBe(true)
  })
})

describe('UnlockPropertyUseCase', () => {
  let useCase: UnlockPropertyUseCase
  let propertyRepo: MockPropertyRepository
  let paymentGateway: MockPaymentGateway
  
  beforeEach(() => {
    propertyRepo = new MockPropertyRepository()
    paymentGateway = new MockPaymentGateway()
    // ... setup other mocks
    
    useCase = new UnlockPropertyUseCase(
      propertyRepo,
      paymentGateway,
      notificationService,
      eventBus
    )
  })
  
  it('should unlock property successfully', async () => {
    // Arrange
    const property = createProperty({ score: 94 })
    const user = createUser()
    propertyRepo.setProperty(property)
    paymentGateway.setSuccessfulPayment()
    
    // Act
    const result = await useCase.execute({
      propertyId: property.id,
      userId: user.id
    })
    
    // Assert
    expect(result.success).toBe(true)
    expect(result.accessGranted.verificationReport).toBe(true)
    expect(notificationService.sent).toHaveLength(1)
    expect(eventBus.published).toContain(
      expect.objectContaining({ type: 'PropertyUnlocked' })
    )
  })
  
  it('should fail if payment fails', async () => {
    paymentGateway.setFailedPayment()
    
    await expect(
      useCase.execute({ propertyId, userId })
    ).rejects.toThrow(PaymentFailedException)
  })
})
```

## Benefits

### 1. Testability
- Domain logic is pure (no dependencies)
- Use cases can be tested with mocks
- UI can be tested independently

### 2. Flexibility
- Swap PostgreSQL for MongoDB without changing domain
- Replace Razorpay with Stripe easily
- Change UI framework (React to Vue) without touching logic

### 3. Maintainability
- Clear separation of concerns
- Each layer has single responsibility
- Easy to understand and modify

### 4. Scalability
- Microservices can share domain layer
- Use cases can be deployed independently
- Infrastructure can scale separately

## File Structure
```
propmubi/
â”œâ”€â”€ packages/
â”‚   â”œâ”€â”€ domain/
â”‚   â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”‚   â”œâ”€â”€ entities/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Property.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ User.ts
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ Transaction.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ value-objects/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ PropertyId.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Money.ts
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ Location.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ repositories/ (interfaces)
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ PropertyRepository.ts
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ UserRepository.ts
â”‚   â”‚   â”‚   â””â”€â”€ services/ (domain services)
â”‚   â”‚   â”‚       â””â”€â”€ VerificationService.ts
â”‚   â”‚   â””â”€â”€ tests/
â”‚   â”‚
â”‚   â”œâ”€â”€ application/
â”‚   â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”‚   â”œâ”€â”€ use-cases/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ UnlockPropertyUseCase.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ BookSiteVisitUseCase.ts
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ SearchPropertiesUseCase.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ dto/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ UnlockPropertyRequest.ts
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ UnlockPropertyResponse.ts
â”‚   â”‚   â”‚   â””â”€â”€ ports/ (interfaces for infrastructure)
â”‚   â”‚   â”‚       â”œâ”€â”€ PaymentGateway.ts
â”‚   â”‚   â”‚       â””â”€â”€ NotificationService.ts
â”‚   â”‚   â””â”€â”€ tests/
â”‚   â”‚
â”‚   â”œâ”€â”€ infrastructure/
â”‚   â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”‚   â”œâ”€â”€ repositories/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ PropertyRepositoryImpl.ts
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ UserRepositoryImpl.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ gateways/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ RazorpayGateway.ts
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ WhatsAppGateway.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ database/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ PostgreSQLClient.ts
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ migrations/
â”‚   â”‚   â”‚   â””â”€â”€ di/
â”‚   â”‚   â”‚       â””â”€â”€ container.ts
â”‚   â”‚   â””â”€â”€ tests/
â”‚   â”‚
â”‚   â””â”€â”€ presentation/
â”‚       â”œâ”€â”€ web/
â”‚       â”‚   â””â”€â”€ src/
â”‚       â”‚       â”œâ”€â”€ screens/
â”‚       â”‚       â”œâ”€â”€ components/
â”‚       â”‚       â””â”€â”€ hooks/
â”‚       â””â”€â”€ mobile/
â”‚           â””â”€â”€ src/
â”‚               â”œâ”€â”€ screens/
â”‚               â”œâ”€â”€ components/
â”‚               â””â”€â”€ hooks/
```

## Key Takeaways

1. **Domain layer is sacred** - Pure business logic, zero dependencies
2. **Use cases orchestrate** - Application logic coordinates domain and infrastructure
3. **Infrastructure is replaceable** - Can swap any external dependency
4. **Presentation is thin** - UI just renders data and delegates to use cases
5. **Dependencies point inward** - Outer layers depend on inner, never reverse

This architecture ensures Propmubi remains maintainable as it scales to millions of users and hundreds of developers.

CLEAN_ARCH

cat > "$PATTERNS_DIR/architectural/02-repository-pattern.md" << 'REPO_PATTERN'
# REPOSITORY PATTERN

## Overview
Abstraction layer between domain/business logic and data access, providing clean API for data operations.

## Pattern Structure
```
Domain Layer (Business Logic)
        â†“ (depends on interface)
Repository Interface
        â†‘ (implements)
Repository Implementation
        â†“ (uses)
Data Source (PostgreSQL, MongoDB, API)
// packages/domain/src/repositories/PropertyRepository.ts

export interface PropertyRepository {
  // Basic CRUD
  findById(id: PropertyId): Promise<Property | null>
  save(property: Property): Promise<void>
  delete(id: PropertyId): Promise<void>
  
  // Collection operations
  findAll(pagination: Pagination): Promise<Property[]>
  count(): Promise<number>
  exists(id: PropertyId): Promise<boolean>
  
  // Domain-specific queries
  findByLocation(location: Location, radius: Distance): Promise<Property[]>
  findByPriceRange(min: Money, max: Money): Promise<Property[]>
  findVerifiedProperties(minScore: number): Promise<Property[]>
  findByBuilder(builderId: BuilderId): Promise<Property[]>
  
  // Advanced queries
  search(criteria: PropertySearchCriteria): Promise<SearchResult<Property>>
  findSimilar(property: Property, limit: number): Promise<Property[]>
  findUpcoming(location: Location): Promise<Property[]>
}

// Search criteria (domain concept)
export interface PropertySearchCriteria {
  location?: LocationCriteria
  pricing?: PricingCriteria
  configuration?: ConfigurationCriteria
  verification?: VerificationCriteria
  amenities?: string[]
  status?: PropertyStatus[]
  
  // Pagination & sorting
  page?: number
  limit?: number
  sortBy?: 'price' | 'score' | 'date' | 'popularity'
  sortOrder?: 'asc' | 'desc'
}


// packages/infrastructure/src/repositories/PropertyRepositoryImpl.ts

export class PropertyRepositoryImpl implements PropertyRepository {
  constructor(
    private readonly db: Database,
    private readonly cache: CacheService,
    private readonly mapper: PropertyMapper
  ) {}
  
  async findById(id: PropertyId): Promise<Property | null> {
    // 1. Check cache
    const cacheKey = `property:${id.value}`
    const cached = await this.cache.get<PropertyDTO>(cacheKey)
    
    if (cached) {
      return this.mapper.toDomain(cached)
    }
    
    // 2. Query database
    const result = await this.db.query<PropertyDTO>(
      `SELECT p.*, 
              v.score as verification_score,
              b.name as builder_name
       FROM properties p
       LEFT JOIN verifications v ON p.id = v.property_id
       LEFT JOIN builders b ON p.builder_id = b.id
       WHERE p.id = $1 AND p.deleted_at IS NULL`,
      [id.value]
    )
    
    if (!result.rows[0]) {
      return null
    }
    
    const property = this.mapper.toDomain(result.rows[0])
    
    // 3. Cache for future
    await this.cache.set(cacheKey, result.rows[0], 300) // 5 min TTL
    
    return property
  }
  
  async save(property: Property): Promise<void> {
    const dto = this.mapper.toDTO(property)
    
    // Upsert operation
    await this.db.query(
      `INSERT INTO properties (
        id, title, description, property_type, location,
        pricing, area, status, verification_id, builder_id,
        created_at, updated_at
      ) VALUES (
        $1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12
      )
      ON CONFLICT (id) DO UPDATE SET
        title = EXCLUDED.title,
        description = EXCLUDED.description,
        pricing = EXCLUDED.pricing,
        updated_at = NOW()`,
      [
        dto.id,
        dto.title,
        dto.description,
        dto.propertyType,
        JSON.stringify(dto.location),
        JSON.stringify(dto.pricing),
        JSON.stringify(dto.area),
        dto.status,
        dto.verificationId,
        dto.builderId,
        dto.createdAt,
        new Date()
      ]
    )
    
    // Invalidate cache
    await this.cache.delete(`property:${property.id.value}`)
  }
  
  async search(criteria: PropertySearchCriteria): Promise<SearchResult<Property>> {
    const query = this.buildSearchQuery(criteria)
    
    // Execute count and data queries in parallel
    const [countResult, dataResult] = await Promise.all([
      this.db.query<{ count: number }>(query.countSql, query.params),
      this.db.query<PropertyDTO>(query.dataSql, query.params)
    ])
    
    const total = parseInt(countResult.rows[0].count.toString())
    const properties = dataResult.rows.map(row => this.mapper.toDomain(row))
    
    return {
      items: properties,
      total,
      page: criteria.page || 1,
      limit: criteria.limit || 20,
      hasMore: (criteria.page || 1) * (criteria.limit || 20) < total
    }
  }
  
  async findByLocation(
    location: Location,
    radius: Distance
  ): Promise<Property[]> {
    // Using PostGIS for geospatial queries
    const result = await this.db.query<PropertyDTO>(
      `SELECT p.*, 
              ST_Distance(
                p.location::geography,
                ST_MakePoint($1, $2)::geography
              ) as distance
       FROM properties p
       WHERE ST_DWithin(
         p.location::geography,
         ST_MakePoint($1, $2)::geography,
         $3
       )
       AND p.deleted_at IS NULL
       ORDER BY distance ASC`,
      [location.longitude, location.latitude, radius.inMeters()]
    )
    
    return result.rows.map(row => this.mapper.toDomain(row))
  }
  
  async findSimilar(property: Property, limit: number): Promise<Property[]> {
    // Similarity based on multiple factors
    const result = await this.db.query<PropertyDTO>(
      `SELECT p.*,
              (
                -- Location similarity (closer = higher score)
                (1 - (ST_Distance(p.location::geography, $2::geography) / 10000)) * 0.3 +
                
                -- Price similarity (closer = higher score)
                (1 - ABS(p.base_price - $3) / GREATEST(p.base_price, $3)) * 0.3 +
                
                -- Configuration match
                CASE WHEN p.configuration = $4 THEN 0.2 ELSE 0 END +
                
                -- Same builder
                CASE WHEN p.builder_id = $5 THEN 0.2 ELSE 0 END
              ) as similarity_score
       FROM properties p
       WHERE p.id != $1
         AND p.deleted_at IS NULL
       ORDER BY similarity_score DESC
       LIMIT $6`,
      [
        property.id.value,
        `POINT(${property.location.longitude} ${property.location.latitude})`,
        property.pricing.basePrice.value,
        property.configuration,
        property.builderId?.value,
        limit
      ]
    )
    
    return result.rows.map(row => this.mapper.toDomain(row))
  }
  
  private buildSearchQuery(criteria: PropertySearchCriteria): {
    countSql: string
    dataSql: string
    params: any[]
  } {
    const conditions: string[] = ['p.deleted_at IS NULL']
    const params: any[] = []
    let paramIndex = 1
    
    // Location filter
    if (criteria.location) {
      if (criteria.location.city) {
        conditions.push(`p.location->>'city' = $${paramIndex}`)
        params.push(criteria.location.city)
        paramIndex++
      }
      
      if (criteria.location.locality) {
        conditions.push(`p.location->>'locality' = $${paramIndex}`)
        params.push(criteria.location.locality)
        paramIndex++
      }
      
      if (criteria.location.coordinates && criteria.location.radius) {
        conditions.push(
          `ST_DWithin(
            p.location::geography,
            ST_MakePoint($${paramIndex}, $${paramIndex + 1})::geography,
            $${paramIndex + 2}
          )`
        )
        params.push(
          criteria.location.coordinates.longitude,
          criteria.location.coordinates.latitude,
          criteria.location.radius
        )
        paramIndex += 3
      }
    }
    
    // Price filter
    if (criteria.pricing) {
      if (criteria.pricing.min) {
        conditions.push(`(p.pricing->>'basePrice')::bigint >= $${paramIndex}`)
        params.push(criteria.pricing.min)
        paramIndex++
      }
      
      if (criteria.pricing.max) {
        conditions.push(`(p.pricing->>'basePrice')::bigint <= $${paramIndex}`)
        params.push(criteria.pricing.max)
        paramIndex++
      }
    }
    
    // Configuration filter
    if (criteria.configuration) {
      if (criteria.configuration.bedrooms) {
        conditions.push(`p.configuration = $${paramIndex}`)
        params.push(`${criteria.configuration.bedrooms}BHK`)
        paramIndex++
      }
    }
    
    // Verification filter
    if (criteria.verification) {
      if (criteria.verification.minScore) {
        conditions.push(`v.score >= $${paramIndex}`)
        params.push(criteria.verification.minScore)
        paramIndex++
      }
    }
    
    // Status filter
    if (criteria.status && criteria.status.length > 0) {
      conditions.push(`p.status = ANY($${paramIndex})`)
      params.push(criteria.status)
      paramIndex++
    }
    
    const whereClause = conditions.join(' AND ')
    
    // Sorting
    let orderBy = 'p.created_at DESC'
    if (criteria.sortBy) {
      switch (criteria.sortBy) {
        case 'price':
          orderBy = `(p.pricing->>'basePrice')::bigint ${criteria.sortOrder || 'ASC'}`
          break
        case 'score':
          orderBy = `v.score ${criteria.sortOrder || 'DESC'}`
          break
        case 'popularity':
          orderBy = `p.view_count ${criteria.sortOrder || 'DESC'}`
          break
      }
    }
    
    // Pagination
    const limit = criteria.limit || 20
    const offset = ((criteria.page || 1) - 1) * limit
    
    const countSql = `
      SELECT COUNT(*) as count
      FROM properties p
      LEFT JOIN verifications v ON p.id = v.property_id
      WHERE ${whereClause}
    `
    
    const dataSql = `
      SELECT p.*, v.score as verification_score, b.name as builder_name
      FROM properties p
      LEFT JOIN verifications v ON p.id = v.property_id
      LEFT JOIN builders b ON p.builder_id = b.id
      WHERE ${whereClause}
      ORDER BY ${orderBy}
      LIMIT $${paramIndex} OFFSET $${paramIndex + 1}
    `
    
    params.push(limit, offset)
    
    return { countSql, dataSql, params }
  }
}
// packages/infrastructure/src/mappers/PropertyMapper.ts

export class PropertyMapper {
  toDomain(dto: PropertyDTO): Property {
    return new Property(
      new PropertyId(dto.id),
      dto.title,
      Location.from(dto.location),
      Pricing.from(dto.pricing),
      VerificationResult.from({ score: dto.verification_score }),
      dto.status as PropertyStatus
    )
  }
  
  toDTO(property: Property): PropertyDTO {
    return {
      id: property.id.value,
      title: property.title,
      description: property.description,
      location: property.location.toJSON(),
      pricing: property.pricing.toJSON(),
      status: property.status,
      verificationId: property.verification.id.value,
      builderId: property.builderId?.value,
      createdAt: property.createdAt,
      updatedAt: new Date()
    }
  }
}
// Domain layer
export interface Specification<T> {
  isSatisfiedBy(item: T): boolean
  toSqlCriteria(): { clause: string; params: any[] }
}


export class PriceRangeSpecification implements Specification<Property> {
  constructor(
    private min: Money,
    private max: Money
  ) {}
  
  isSatisfiedBy(property: Property): boolean {
    const price = property.pricing.basePrice
    return price.gte(this.min) && price.lte(this.max)
  }
  
  toSqlCriteria(): { clause: string; params: any[] } {
    return {
      clause: '(p.pricing->>'basePrice')::bigint BETWEEN $1 AND $2',
      params: [this.min.value, this.max.value]
    }
  }
}

// Usage
const spec = new PriceRangeSpecification(
  new Money(7000000),
  new Money(9000000)
)

const properties = await propertyRepo.findBySpecification(spec)
export class UnitOfWork {
  private repositories = new Map()
  private newEntities = new Set()
  private dirtyEntities = new Set()
  private deletedEntities = new Set()
  
  registerNew(entity: Entity) {
    this.newEntities.add(entity)
  }
  
  registerDirty(entity: Entity) {
    this.dirtyEntities.add(entity)
  }
  
  registerDeleted(entity: Entity) {
    this.deletedEntities.add(entity)
  }
  
  async commit() {
    const transaction = await this.db.beginTransaction()
    
    try {
      // Insert new entities
      for (const entity of this.newEntities) {
        await this.getRepo(entity
).insert(entity, transaction)
}
// Update dirty entities
  for (const entity of this.dirtyEntities) {
    await this.getRepo(entity).update(entity, transaction)
  }
  
  // Delete entities
  for (const entity of this.deletedEntities) {
    await this.getRepo(entity).delete(entity, transaction)
  }
  
  await transaction.commit()
  this.clear()
} catch (error) {
  await transaction.rollback()
  throw error
}
}
private clear() {
this.newEntities.clear()
this.dirtyEntities.clear()
this.deletedEntities.clear()
}
}
## Testing
```typescript
describe('PropertyRepository', () => {
  let repo: PropertyRepository
  let db: TestDatabase
  
  beforeEach(async () => {
    db = await TestDatabase.create()
    repo = new PropertyRepositoryImpl(db, new InMemoryCache(), new PropertyMapper())
  })
  
  afterEach(async () => {
    await db.destroy()
  })
  
  describe('findById', () => {
    it('should return property when exists', async () => {
      // Arrange
      const propertyId = new PropertyId('prop_123')
      await db.insert('properties', createPropertyDTO({ id: propertyId.value }))
      
      // Act
      const property = await repo.findById(propertyId)
      
      // Assert
      expect(property).not.toBeNull()
      expect(property!.id).toEqual(propertyId)
    })
    
    it('should return null when not exists', async () => {
      const property = await repo.findById(new PropertyId('nonexistent'))
      expect(property).toBeNull()
    })
    
    it('should use cache on second call', async () => {
      const propertyId = new PropertyId('prop_123')
      await db.insert('properties', createPropertyDTO({ id: propertyId.value }))
      
      await repo.findById(propertyId) // First call (DB)
      const spy = jest.spyOn(db, 'query')
      await repo.findById(propertyId) // Second call (should be cache)
      
      expect(spy).not.toHaveBeenCalled()
    })
  })
  
  describe('search', () => {
    it('should filter by location', async () => {
      // Arrange
      await db.insertMany('properties', [
        createPropertyDTO({ location: { city: 'Hyderabad', locality: 'Gachibowli' } }),
        createPropertyDTO({ location: { city: 'Hyderabad', locality: 'Kondapur' } }),
        createPropertyDTO({ location: { city: 'Bangalore', locality: 'Whitefield' } })
      ])
      
      // Act
      const result = await repo.search({
        location: { city: 'Hyderabad' }
      })
      
      // Assert
      expect(result.items).toHaveLength(2)
      expect(result.items.every(p => p.location.city === 'Hyderabad')).toBe(true)
    })
    
    it('should filter by price range', async () => {
      await db.insertMany('properties', [
        createPropertyDTO({ pricing: { basePrice: 7000000 } }),
        createPropertyDTO({ pricing: { basePrice: 8500000 } }),
        createPropertyDTO({ pricing: { basePrice: 12000000 } })
      ])
      
      const result = await repo.search({
        pricing: {
          min: 7000000,
          max: 9000000
        }
      })
      
      expect(result.items).toHaveLength(2)
    })
    
    it('should handle pagination correctly', async () => {
      await db.insertMany('properties', Array.from({ length: 50 }, (_, i) =>
        createPropertyDTO({ id: `prop_${i}` })
      ))
      
      const page1 = await repo.search({ page: 1, limit: 20 })
      const page2 = await repo.search({ page: 2, limit: 20 })
      
      expect(page1.items).toHaveLength(20)
      expect(page2.items).toHaveLength(20)
      expect(page1.hasMore).toBe(true)
      expect(page2.hasMore).toBe(true)
      expect(page1.total).toBe(50)
    })
  })
})
```

## Performance Optimizations

### 1. Caching Strategy
```typescript
class CachedPropertyRepository implements PropertyRepository {
  constructor(
    private baseRepo: PropertyRepository,
    private cache: CacheService
  ) {}
  
  async findById(id: PropertyId): Promise<Property | null> {
    const cacheKey = `property:${id.value}`
    
    // Try cache first
    const cached = await this.cache.get(cacheKey)
    if (cached) return cached
    
    // Fallback to database
    const property = await this.baseRepo.findById(id)
    
    if (property) {
      await this.cache.set(cacheKey, property, 300) // 5 min
    }
    
    return property
  }
}
```

### 2. Batch Loading
```typescript
class BatchPropertyRepository implements PropertyRepository {
  private batchLoader = new DataLoader<PropertyId, Property>(
    async (ids: PropertyId[]) => {
      const properties = await this.db.query(
        'SELECT * FROM properties WHERE id = ANY($1)',
        [ids.map(id => id.value)]
      )
      
      const propertyMap = new Map(
        properties.rows.map(row => [row.id, this.mapper.toDomain(row)])
      )
      
      return ids.map(id => propertyMap.get(id.value) || null)
    }
  )
  
  async findById(id: PropertyId): Promise<Property | null> {
    return this.batchLoader.load(id)
  }
}
```

### 3. Query Optimization
```typescript
// Eager load related entities to avoid N+1 queries
async findWithDetails(id: PropertyId): Promise<PropertyWithDetails> {
  const result = await this.db.query(
    `SELECT 
      p.*,
      v.* as verification,
      b.* as builder,
      array_agg(DISTINCT i.*) as images,
      array_agg(DISTINCT d.*) as documents
     FROM properties p
     LEFT JOIN verifications v ON p.id = v.property_id
     LEFT JOIN builders b ON p.builder_id = b.id
     LEFT JOIN property_images i ON p.id = i.property_id
     LEFT JOIN documents d ON p.id = d.property_id
     WHERE p.id = $1
     GROUP BY p.id, v.id, b.id`,
    [id.value]
  )
  
  return this.mapper.toDomainWithDetails(result.rows[0])
}
```

## Key Takeaways

1. **Abstraction over implementation** - Domain doesn't know about SQL
2. **Collection-like interface** - Work with entities, not tables
3. **Single source of truth** - All data access through repository
4. **Testable** - Easy to mock for unit tests
5. **Cacheable** - Perfect place to add caching
6. **Optimizable** - Can optimize queries without changing domain

Repository Pattern is the foundation for Clean Architecture in Propmubi.

REPO_PATTERN

echo "âœ… Enterprise design patterns created!"
echo ""

# ============================================================
# CREATE MODULES STRUCTURE
# ============================================================

echo "ðŸ“¦ Creating Modular Architecture..."

cat > "$BASE_DIR/12-modules/README.md" << 'MODULES_README'
# PROPMUBI - MODULAR ARCHITECTURE

## Overview
Propmubi is built as a collection of independent, reusable modules following best practices from enterprise systems.

## Module Types

### 1. Core Modules (Infrastructure)
**Purpose:** Foundational utilities used across entire app

- `@propmubi/design-system` - UI tokens, themes
- `@propmubi/utils` - Common utilities
- `@propmubi/types` - Shared TypeScript types
- `@propmubi/api-client` - HTTP client wrapper
- `@propmubi/logger` - Structured logging
- `@propmubi/analytics` - Event tracking

### 2. Feature Modules (Business)
**Purpose:** Encapsulated business features

- `@propmubi/property` - Property management
- `@propmubi/verification` - Verification system
- `@propmubi/geospatial` - Maps & satellite
- `@propmubi/documents` - Document vault
- `@propmubi/transactions` - Transaction flow
- `@propmubi/chat` - AI chat system
- `@propmubi/auth` - Authentication

### 3. Shared Modules (Cross-cutting)
**Purpose:** Reusable UI components & hooks

- `@propmubi/ui-components` - Component library
- `@propmubi/hooks` - React hooks
- `@propmubi/forms` - Form utilities
- `@propmubi/navigation` - Navigation config

### 4. Infrastructure Modules
**Purpose:** External integrations

- `@propmubi/database` - DB connections
- `@propmubi/cache` - Redis/memory cache
- `@propmubi/storage` - S3/file storage
- `@propmubi/queue` - Job queue (BullMQ)
- `@propmubi/email` - Email service
- `@propmubi/sms` - SMS/WhatsApp service

## Module Structure (Standard)

**Rule:** Higher-level modules can depend on lower-level, never reverse.

## Example Module: @propmubi/property

### Public API (`index.ts`)
```typescript
// Domain exports
export { Property, PropertyId } from './domain/entities'
export { Location, Pricing } from './domain/value-objects'
export type { PropertyRepository } from './domain/repositories'

// Application exports
export { SearchPropertiesUseCase } from './application/use-cases'
export type { SearchPropertiesRequest } from './application/dto'

// Presentation exports
export { PropertyCard } from './presentation/components'
export { PropertyDetailsScreen } from './presentation/screens'
export { useProperty, usePropertySearch } from './presentation/hooks'

// Configuration
export { PropertyModule } from './PropertyModule'
```

### Module Configuration
```typescript
// PropertyModule.ts
export class PropertyModule {
  static forRoot(config: PropertyModuleConfig): DynamicModule {
    return {
      providers: [
        {
          provide: 'PropertyRepository',
          useClass: config.useRepository || PropertyRepositoryImpl
        },
        {
          provide: 'PropertyService',
          useClass: PropertyService
        },
        SearchPropertiesUseCase,
        UnlockPropertyUseCase,
        // ... other use cases
      ],
      exports: [
        'PropertyRepository',
        'PropertyService',
        SearchPropertiesUseCase
      ]
    }
  }
}
```

## Module Boundaries

### DO's âœ…
- Export only what's needed
- Keep internal implementation private
- Use dependency injection
- Define clear contracts (interfaces)
- Version your modules independently

### DON'Ts âŒ
- Don't import internal files from other modules
- Don't create circular dependencies
- Don't leak implementation details
- Don't couple modules tightly

## Example: Using Modules in App
```typescript
// apps/mobile/App.tsx
import { PropertyModule } from '@propmubi/property'
import { GeospatialModule } from '@propmubi/geospatial'
import { AuthModule } from '@propmubi/auth'

const app = createApp({
  modules: [
    AuthModule.forRoot({
      jwtSecret: process.env.JWT_SECRET
    }),
    PropertyModule.forRoot({
      useRepository: ProductionPropertyRepository
    }),
    GeospatialModule.forRoot({
      apiKey: process.env.GOOGLE_MAPS_KEY
    })
  ]
})
```

## Module Testing

Each module has its own test suite:
```typescript
// @propmubi/property/tests/integration/search.test.ts
describe('PropertyModule - Search Integration', () => {
  let module: PropertyModule
  let useCase: SearchPropertiesUseCase
  
  beforeAll(async () => {
    module = await PropertyModule.forRoot({
      useRepository: InMemoryPropertyRepository
    }).compile()
    
    useCase = module.get(SearchPropertiesUseCase)
  })
  
  it('should search properties by location', async () => {
    const result = await useCase.execute({
      location: { city: 'Hyderabad' }
    })
    
    expect(result.items).toBeDefined()
  })
})
```

## Benefits

1. **Reusability** - Use same module in web & mobile
2. **Testability** - Test modules independently
3. **Maintainability** - Clear boundaries
4. **Scalability** - Add features without breaking existing
5. **Team productivity** - Teams own specific modules

MODULES_README

cat > "$BASE_DIR/12-modules/core/design-system/package.json" << 'DS_PACKAGE'
{
  "name": "@propmubi/design-system",
  "version": "1.0.0",
  "description": "Propmubi design tokens and theme configuration",
  "main": "dist/index.js",
  "types": "dist/index.d.ts",
  "scripts": {
    "build": "tsc",
    "test": "jest",
    "lint": "eslint src/**/*.ts"
  },
  "keywords": ["design-system", "tokens", "theme"],
  "author": "Propmubi Team",
  "license": "PROPRIETARY",
  "dependencies": {},
  "devDependencies": {
    "typescript": "^5.2.0",
    "jest": "^29.0.0",
    "@types/jest": "^29.0.0"
  },
  "files": [
    "dist",
    "README.md"
  ]
}
DS_PACKAGE

cat > "$BASE_DIR/12-modules/feature/property/README.md" << 'PROPERTY_MODULE'
# @propmubi/property

Property management feature module for Propmubi.

## Installation
```bash
pnpm add @propmubi/property
```

## Usage

### Setup
```typescript
import { PropertyModule } from '@propmubi/property'

const app = createApp({
  modules: [
    PropertyModule.forRoot({
      apiBaseUrl: 'https://api.propmubi.com',
      cache: {
        enabled: true,
        ttl: 300
      }
    })
  ]
})
```

### Use Cases
```typescript
import { SearchPropertiesUseCase } from '@propmubi/property'

const searchProperties = new SearchPropertiesUseCase(
  propertyRepository,
  cacheService
)

const result = await searchProperties.execute({
  location: { city: 'Hyderabad', locality: 'Gachibowli' },
  pricing: { min: 7000000, max: 9000000 },
  configuration: { bedrooms: 3 }
})
```

### Components
```typescript
import { PropertyCard } from '@propmubi/property'

<PropertyCard
  property={property}
  onPress={() => navigate('/property', { id: property.id })}
  onSave={() => saveProperty(property.id)}
/>
```

### Hooks
```typescript
import { useProperty, usePropertySearch } from '@propmubi/property'

// Fetch single property
const { property, isLoading, error } = useProperty(propertyId)

// Search properties
const { 
  results, 
  isLoading, 
  hasMore, 
  loadMore 
} = usePropertySearch({
  location: { city: 'Hyderabad' }
})
```

## API

### Domain

#### Property Entity
- `Property` - Main property entity
- `PropertyId` - Value object for property ID
- `Location` - Value object for location
- `Pricing` - Value object for pricing

### Application

#### Use Cases
- `SearchPropertiesUseCase` - Search properties
- `GetPropertyDetailsUseCase` - Get property by ID
- `UnlockPropertyUseCase` - Unlock insider access
- `SavePropertyUseCase` - Save/unsave property
- `ComparePropertiesUseCase` - Compare multiple properties

### Presentation

#### Components
- `PropertyCard` - Property list card
- `PropertyHeader` - Property details header
- `VerificationBadge` - Verification score badge
- `PricingCard` - Pricing information
- `AmenitiesList` - Amenities display

#### Hooks
- `useProperty(id)` - Fetch property
- `usePropertySearch(criteria)` - Search properties
- `useSavedProperties()` - Get saved properties
- `usePropertyComparison(ids[])` - Compare properties

## Testing
```bash
pnpm test
```

## License

Proprietary - Propmubi

PROPERTY_MODULE

echo "âœ… Module architecture created!"
echo ""

# ============================================================
# FINALIZE
# ============================================================

echo ""
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo "ðŸŽ‰ COMPLETE PACKAGE GENERATION FINISHED!"
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo ""
echo "ðŸ“Š SUMMARY:"
echo ""
echo "  âœ… Channel Partner Portal (2 screens)"
echo "  âœ… Builder Portal (1 screen with sub-sections)"
echo "  âœ… Enterprise Design Patterns (2 patterns)"
echo "  âœ… Modular Architecture (Complete structure)"
echo ""
echo "ðŸ“ LOCATIONS:"
echo ""
echo "  CP Portal:        $UX_DIR/screens/cp/"
echo "  Builder Portal:   $UX_DIR/screens/builder/"
echo "  Patterns:         $PATTERNS_DIR/"
echo "  Modules:          $BASE_DIR/12-modules/"
echo ""
echo "ðŸ“‹ WHAT'S INCLUDED:"
echo ""
echo "  CP Portal:"
echo "    â€¢ Dashboard with KPIs"
echo "    â€¢ Lead management (pipeline view)"
echo "    â€¢ Commission tracker"
echo "    â€¢ Performance analytics"
echo ""
echo "  Builder Portal:"
echo "    â€¢ Multi-project dashboard"
echo "    â€¢ Inventory management"
echo "    â€¢ CP performance tracking"
echo "    â€¢ Marketing ROI analytics"
echo "    â€¢ Unit selection matrix"
echo "    â€¢ Document vault"
echo ""
echo "  Design Patterns:"
echo "    â€¢ Clean Architecture (4 layers)"
echo "    â€¢ Repository Pattern (data abstraction)"
echo "    â€¢ More patterns in: $PATTERNS_DIR/"
echo ""
echo "  Module System:"
echo "    â€¢ Core modules (infrastructure)"
echo "    â€¢ Feature modules (business logic)"
echo "    â€¢ Shared modules (reusable UI)"
echo "    â€¢ Complete @propmubi/property example"
echo ""
echo "ðŸš€ NEXT STEPS:"
echo ""
echo "  1. Review all screens in $UX_DIR/screens/"
echo "  2. Study design patterns in $PATTERNS_DIR/"
echo "  3. Understand module structure in $BASE_DIR/12-modules/"
echo "  4. Start implementing with generated prompts"
echo ""
echo "ðŸ’¡ TIP: Each screen includes:"
echo "  â€¢ Complete UX specifications"
echo "  â€¢ Component structures"
echo "  â€¢ State management patterns"
echo "  â€¢ API contracts"
echo "  â€¢ Testing strategies"
echo ""
echo "âœ¨ All screens follow enterprise-grade patterns!"
echo ""